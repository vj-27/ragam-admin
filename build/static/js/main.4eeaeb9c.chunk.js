(this["webpackJsonpragam-admin"]=this["webpackJsonpragam-admin"]||[]).push([[0],{10:function(e,t,n){},12:function(e,t,n){"use strict";n.r(t);var s=n(1),i=n.n(s),c=n(4),a=n.n(c),r=(n(9),n(2)),o=(n(10),n(0));function l(e){var t=[];for(var n in e)for(var s in e[n].events)t.push(e[n].events[s]);return console.log(t),t}function j(e,t){var n=0;for(var s in e)e[s].event==t&&e[s].teamMembers.length&&(n+=1);return n}var d=function(){var e=Object(s.useState)(""),t=Object(r.a)(e,2),n=t[0],i=t[1],c=Object(s.useState)(""),a=Object(r.a)(c,2),d=a[0],u=a[1],h="https://api.ragam.live/",b=Object(s.useState)(""),O=Object(r.a)(b,2),m=O[0],f=O[1],x=Object(s.useState)(""),g=Object(r.a)(x,2),p=g[0],v=g[1],y=Object(s.useState)(""),S=Object(r.a)(y,2),C=S[0],k=S[1],w=Object(s.useState)({}),N=Object(r.a)(w,2),T=N[0],P=N[1],I=Object(s.useState)("login"),E=Object(r.a)(I,2),L=E[0],D=E[1],J=Object(s.useState)({}),M=Object(r.a)(J,2),R=M[0],A=M[1],B=Object(s.useState)([]),F=Object(r.a)(B,2),U=F[0],z=F[1],G=Object(s.useState)(""),V=Object(r.a)(G,2),W=V[0],Y=V[1],q=Object(s.useState)(""),H=Object(r.a)(q,2),K=H[0];return H[1],Object(s.useEffect)((function(){var e=localStorage.getItem("user");(e=JSON.parse(e))&&(D("events"),P(e)),fetch(h+"categories").then((function(e){if(e.ok)return e.json();alert("Some error Occurred. Please try again later.")})).then((function(e){console.log(e),A(e)}))}),[]),Object(s.useEffect)((function(){T.token&&fetch(h+"user-event-details",{method:"GET",headers:{Authorization:"Bearer "+T.token}}).then((function(e){if(e.ok)return e.json();alert("Some error Occurred.Contact Technical Team.")})).then((function(e){console.log(e),z(e)}))}),[T.token]),Object(o.jsxs)("div",{className:"App",children:[Object(o.jsxs)("header",{className:"App-header",children:[Object(o.jsx)("h4",{children:"Ragam Admin"}),T.token&&Object(o.jsx)("button",{onClick:function(){localStorage.removeItem("user"),P({})},children:"Logout"})]}),Object(o.jsxs)("div",{children:["login"==L&&Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(o.jsx)("h4",{children:"Login"}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{for:"email",children:"Email:"}),Object(o.jsx)("input",{type:"text",id:"email",name:"email",onChange:function(e){i(e.target.value)}})]}),Object(o.jsxs)("div",{children:[Object(o.jsx)("label",{for:"pass",children:"Password:"}),Object(o.jsx)("input",{type:"password",id:"pass",name:"pass",onChange:function(e){f(e.target.value)}})]}),Object(o.jsx)("h4",{children:d}),Object(o.jsx)("input",{type:"button",value:"Submit",onClick:function(){fetch(h+"auth/local",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({identifier:n,password:m})}).then((function(e){e.json().then((function(e){if(e.statusCode)u("Username or Password invalid");else{var t=e.user;t.token=e.jwt,localStorage.setItem("user",JSON.stringify(t)),P(t),D("events")}}))}),(function(e){console.log(e)}))}})]}),"register"==L&&!T.token&&Object(o.jsxs)("div",{children:[Object(o.jsx)("h4",{children:"Register"}),Object(o.jsx)("label",{for:"email",children:"Email:"}),Object(o.jsx)("input",{type:"text",id:"email",name:"email",onChange:function(e){i(e.target.value)}}),Object(o.jsx)("label",{for:"email",children:"Username:"}),Object(o.jsx)("input",{type:"text",id:"username",name:"username",onChange:function(e){k(e.target.value)}}),Object(o.jsx)("label",{for:"pass",children:"Password:"}),Object(o.jsx)("input",{type:"password",id:"pass",name:"pass",onChange:function(e){f(e.target.value)}}),Object(o.jsx)("label",{for:"pass",children:"Repeat Password:"}),Object(o.jsx)("input",{type:"password",id:"rpass",name:"rpass",onChange:function(e){v(e.target.value)}}),Object(o.jsx)("h4",{children:d}),Object(o.jsx)("input",{type:"button",value:"Submit",onClick:function(){m===p?fetch(h+"auth/local/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:C,email:n,password:m})}).then((function(e){e.json().then((function(e){var t,n;e.statusCode?u(null===e||void 0===e||null===(t=e.data[0])||void 0===t||null===(n=t.messages[0])||void 0===n?void 0:n.message):u("Registered succcessfully. PLease login.")}))}),(function(e){console.log(e)})):u("password doesn't match")}}),Object(o.jsx)("button",{onClick:function(){D("login")},children:"Login"})]}),T.token&&"events"==L&&Object(o.jsxs)("div",{children:[Object(o.jsxs)("h4",{children:[" Logged in as ",T.email]}),Object(o.jsx)("div",{style:{display:"flex",flexDirection:"row"},children:Object(o.jsxs)("div",{style:{margin:"auto"},children:[Object(o.jsx)("h4",{children:"Events"}),R.length&&Object(o.jsx)("div",{children:l(R).map((function(e,t){return Object(o.jsx)("div",{style:{display:"flex",alignItems:"center",backgroundColor:e.id==W?"yellow":"lightgray",margin:"auto",marginTop:"5px"},onClick:function(){Y(e.id),D("insideevent"),console.log("eventId",e.id)},children:Object(o.jsx)("h4",{children:e.name})})}))})]})})]}),T.token&&"insideevent"==L&&Object(o.jsxs)("div",{children:[Object(o.jsx)("button",{style:{marginTop:"15px"},onClick:function(){D("events")},children:"Back to events"}),Object(o.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center"},children:Object(o.jsxs)("div",{style:{height:"100vh",overflowY:"scroll"},children:[Object(o.jsx)("h4",{children:"Registrations"}),Object(o.jsxs)("h4",{children:["Total Registrations:",j(U,W)," "]}),U.map((function(e,t){var n;if(e.event==W&&e.teamMembers.length)return Object(o.jsxs)("div",{style:{border:"1px solid black",backgroundColor:t==K?"yellow":"white",padding:"5px"},children:[Object(o.jsx)("h4",{children:" Status"}),e.status,Object(o.jsx)("h4",{children:"teamMembers"}),e.teamMembers.map((function(e,t){return Object(o.jsxs)("div",{style:{display:"flex",flexDirection:"column",flexWrap:"wrap",marginTop:"10px"},children:[Object(o.jsx)("h5",{className:"nomargin",children:e.name}),Object(o.jsx)("h5",{className:"nomargin",children:e.collegeName}),Object(o.jsx)("h5",{className:"nomargin",children:e.ragamID}),Object(o.jsx)("h5",{className:"nomargin",children:e.phoneNumber})]})})),Object(o.jsx)("h4",{children:"Metavalues"}),null===(n=e.metaValues)||void 0===n?void 0:n.map((function(e,t){return Object(o.jsx)("div",{children:e})})),Object(o.jsx)("h4",{children:"Submissions"}),e.submissions.length?e.submissions.map((function(e,t){return Object(o.jsx)("a",{style:{overflow:"hidden",textOverflow:"ellipsis"},href:h.slice(0,-1)+e.url,children:Object(o.jsx)("h4",{children:e.name})})})):Object(o.jsx)("h4",{children:"No submissions by this team"})]})}))]})})]})]})]})},u=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,13)).then((function(t){var n=t.getCLS,s=t.getFID,i=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),i(e),c(e),a(e)}))};a.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(d,{})}),document.getElementById("root")),u()},9:function(e,t,n){}},[[12,1,2]]]);
//# sourceMappingURL=main.4eeaeb9c.chunk.js.map